<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Site layout</title>
    <meta name="author" content="Douglas Creager" />

    <meta name="google-site-verification" content="7KIoYPNsfdDxIdX1QQ7SM2Nm_nyy13aRlDkzE3wzhhY" />

    

    <link rel="alternate" type="application/atom+xml"
          title="dcreager.net" href="/atom.xml"/>
 
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

    <!-- main CSS -->
    <link rel="stylesheet" href="/css/main.css" type="text/css" />

    <!-- Cufon -->
    <script src="/js/jquery-1.4.1.min.js" type="text/javascript"></script>
    <script src="/js/cufon-yui.js" type="text/javascript"></script>
    <script src="/js/Delicious.js" type="text/javascript"></script>
    <script src="/js/Junction.js" type="text/javascript"></script>
    <script src="/js/Tagesschrift.js" type="text/javascript"></script>

    <script type="text/javascript">
      Cufon.replace('.body h1', { fontFamily: 'Delicious' });
      Cufon.replace('.body h2', { fontFamily: 'Delicious' });
      Cufon.replace('.body h3', { fontFamily: 'Delicious' });
      Cufon.replace('.body .postdate', { fontFamily: 'Junction' });
      Cufon.replace('.site_header .title', { fontFamily: 'Tagesschrift' });
      Cufon.replace('.site_header .subtitle', { fontFamily: 'Junction' });
    </script>
  </head>

  <body>

    <!--
       Preload some images.  The “preload” class is set to never
       display.
      -->
    <div class="preload">
      <img src="/images/icon-pdf.png"/>
      <img src="/images/icon-pdf-shadow.png"/>
      <img src="/images/mag.png"/>
      <img src="/images/mag-shadow.png"/>
    </div>

    <div class="site">
      <div class="site_content">
        <div class="left">
          <div class="leftnav">
            <h3><a href="/">Home</a></h3>
<h3><a href="/about/">About</a></h3>
<h3><a href="/archive/">Archive</a></h3>
<h3><a href="/publications/">Publications</a></h3>

          </div>
        </div>

        <div class="site_header">
          <h1 class="title">dcreager.net</p>
          <h2 class="subtitle">a blog about huge data, coding, and miscellanea</p>
        </div>

        <div class="content">

        <div class="body">
          <h1>Site layout</h1>

<div class="postdate">
  Wednesday, August 05, 2009
</div>

<div class="post">
  <p>This post will probably end up being more useful to me than to anyone else who might stumble across the page. Here I&#8217;m going to document how I&#8217;ve set up my homepage, from a technical standpoint.</p>

<h2 id='directory_layout'>Directory layout</h2>

<p>The content of the website is stored in a Git repository (found <a href='http://github.com/dcreager/dcreager.net/'>here</a>). Most of the pages are originally written in Markdown. I use <a href='http://github.com/mojombo/jekyll/'>Jekyll</a> to process the Markdown pages into a static website.</p>

<p>The Git repository contains a standard Jekyll layout:</p>

<ul>
<li>
<p>Dated “posts” (such as blog entries) are placed in the <em>_posts</em> directory.</p>
</li>

<li>
<p>HTML layouts are placed in the <em>_layouts</em> directory.</p>
</li>

<li>
<p>All other content (CSS, images, other pages) lives wherever I please; that directory structure is reproduced on the live site.</p>
</li>
</ul>

<p>One difference is that I include the <em>_site</em> directory in the Git repository; most people seem to include this directory in their <em>.gitignore</em> file so that it&#8217;s not tracked by Git. Doing so allows me to check out the repository and have a working copy of the site, without having to have Jekyll and its dependencies installed on that machine.</p>

<h2 id='editing_and_deploying_changes'>Editing and deploying changes</h2>

<p>While I edit my pages, I keep a</p>

<pre><code>jekyll --server --auto</code></pre>

<p>instance running in the background, which allows me to view a local copy of the new website as I save changes.</p>

<p>For deployment, I have a (non-bare) clone of the Git repository on the Dreamhost machine that hosts my website. Once I have a change that I&#8217;m ready to deploy, I make a new Git commit and push it to the Dreamhost clone. Since I include the <em>_site</em> directory in my commits, this places the latest copy of the website onto the Dreamhost filesystem, ready to go.</p>

<p>Pushing doesn&#8217;t automatically update the checked-out HEAD on the remote system, however, so there&#8217;s an additional step needed. Once I&#8217;ve pushed the changes to Dreamhost, I run the following from the Dreamhost clone:</p>

<pre><code>git reset --hard master</code></pre>

<p>which updates the working copy on disk to be the same as the latest commit that I just pushed. At this point, the Dreamhost clone contains the latest copy of the site in its <em>_site</em> directory.</p>

<p>Dreamhost is expecting to serve my website out of a particular directory within my home directory; the final step is having this served directory be a symlink to the <em>_site</em> directory of the Dreamhost clone. Et voila!</p>
</div>


<div class="posttags">
  Tags:
  <ul>
    
    <li><a href="/tags/dcreager.net/">dcreager.net</a></li>
    
    <li><a href="/tags/jekyll/">jekyll</a></li>
    
  </ul>
</div>


        </div>

        <script type="text/javascript"> Cufon.now(); </script>

        

        <div class="body_separator"></div>

        <div class="body">
          <div id="disqus_thread"></div>

          <script type="text/javascript">
            var disqus_title = "Site layout";
            var disqus_url = "http://dcreager.net/2009/08/05/site-setup/";
          </script>

          <script
             type="text/javascript"
             src="http://disqus.com/forums/dcreager/embed.js">
          </script>
          <noscript>
            <a href="http://dcreager.disqus.com/?url=ref">View the discussion thread.</a>
          </noscript>

          <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>

        

        </div>

      </div>
    </div>

    <div class="footer">
      <div class="copyright">
        Copyright © 2009-2010, Douglas Creager.  All rights reserved.
      </div>
    </div>
  </body>
</html>

