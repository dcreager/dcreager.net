<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Site layout</title>
    <meta name="author" content="Douglas Creager" />
    <link rel="alternate" type="application/atom+xml"
          title="dcreager.net" href="/atom.xml"/>
 
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

    <!-- main CSS -->
    <link rel="stylesheet" href="/css/main.css" type="text/css" />
  </head>

  <body>

    <div class="site">
      <div class="site_content">
        <div class="left">
          <div class="leftnav">
            <p><a href="/">Home</a></p>
<p><a href="/publications/">Publications</a></p>

          </div>
        </div>

        <div class="body">
          
<h1>Site layout</h1>

<div class="postdate">
  Wednesday, August 05, 2009
</div>

<div class="post">
  <p>This post will probably end up being more useful to me than to anyone else who might stumble across the page. Here I&#8217;m going to document how I&#8217;ve set up my homepage, from a technical standpoint.</p>

<h2 id='directory_layout'>Directory layout</h2>

<p>The content of the website is stored in a Git repository (found <a href='http://github.com/dcreager/dcreager.net/'>here</a>). Most of the pages are originally written in Markdown. I use <a href='http://github.com/mojombo/jekyll/'>Jekyll</a> to process the Markdown pages into a static website.</p>

<p>The Git repository contains a standard Jekyll layout:</p>

<ul>
<li>
<p>Dated “posts” (such as blog entries) are placed in the <em>_posts</em> directory.</p>
</li>

<li>
<p>HTML layouts are placed in the <em>_layouts</em> directory.</p>
</li>

<li>
<p>All other content (CSS, images, other pages) lives wherever I please; that directory structure is reproduced on the live site.</p>
</li>
</ul>

<p>One difference is that I include the <em>_site</em> directory in the Git repository; most people seem to include this directory in their <em>.gitignore</em> file so that it&#8217;s not tracked by Git. Doing so allows me to check out the repository and have a working copy of the site, without having to have Jekyll and its dependencies installed on that machine.</p>

<h2 id='editing_and_deploying_changes'>Editing and deploying changes</h2>

<p>While I edit my pages, I keep a</p>

<pre><code>jekyll --server --auto</code></pre>

<p>instance running in the background, which allows me to view a local copy of the new website as I save changes.</p>

<p>For deployment, I have a (non-bare) clone of the Git repository on the Dreamhost machine that hosts my website. Once I have a change that I&#8217;m ready to deploy, I make a new Git commit and push it to the Dreamhost clone. Since I include the <em>_site</em> directory in my commits, this places the latest copy of the website onto the Dreamhost filesystem, ready to go.</p>

<p>Pushing doesn&#8217;t automatically update the checked-out HEAD on the remote system, however, so there&#8217;s an additional step needed. Once I&#8217;ve pushed the changes to Dreamhost, I run the following from the Dreamhost clone:</p>

<pre><code>git reset --hard master</code></pre>

<p>which updates the working copy on disk to be the same as the latest commit that I just pushed. At this point, the Dreamhost clone contains the latest copy of the site in its <em>_site</em> directory.</p>

<p>Dreamhost is expecting to serve my website out of a particular directory within my home directory; the final step is having this served directory be a symlink to the <em>_site</em> directory of the Dreamhost clone. Et voila!</p>
</div>

        </div>

        

        <div class="body_separator"></div>

        <div class="body">
          <div id="disqus_thread"></div>

          <script type="text/javascript">
            var disqus_title = "Site layout";
            var disqus_url = "http://dcreager.net/2009/08/05/site-setup/";
          </script>

          <script
             type="text/javascript"
             src="http://disqus.com/forums/dcreager/embed.js">
          </script>
          <noscript>
            <a href="http://dcreager.disqus.com/?url=ref">View the discussion thread.</a>
          </noscript>

          <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>

        

      </div>
    </div>

    <div class="footer">
      <div class="copyright">
        Copyright © 2009, Douglas Creager.  All rights reserved.
      </div>
    </div>

  </body>
</html>

