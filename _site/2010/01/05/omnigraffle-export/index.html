<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Exporting OmniGraffle documents from the command line</title>
    <meta name="author" content="Douglas Creager" />

    

    <link rel="alternate" type="application/atom+xml"
          title="dcreager.net" href="/atom.xml"/>
 
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

    <!-- main CSS -->
    <link rel="stylesheet" href="/css/main.css" type="text/css" />
  </head>

  <body>

    <!--
       Preload some images.  The “preload” class is set to never
       display.
      -->
    <div class="preload">
      <img src="/images/icon-pdf.png"/>
      <img src="/images/icon-pdf-shadow.png"/>
      <img src="/images/mag.png"/>
      <img src="/images/mag-shadow.png"/>
    </div>

    <div class="site">
      <div class="site_content">
        <div class="left">
          <div class="leftnav">
            <p><a href="/">Home</a></p>
<p><a href="/about/">About</a></p>
<p><a href="/archive/">Archive</a></p>
<p><a href="/publications/">Publications</a></p>

          </div>
        </div>

        <div class="site_header">
          <p class="title">dcreager.net</p>
          <p class="subtitle">A BLOG ABOUT HUGE DATA, CODING, AND MISCELLANEA</p>
        </div>

        <div class="body">
          
<h1>Exporting OmniGraffle documents from the command line</h1>

<div class="postdate">
  Tuesday, January 05, 2010
</div>

<div class="post">
  <p><a href='http://www.omnigroup.com/applications/OmniGraffle/'>OmniGraffle</a> is my tool of choice for creating figures for my papers. It&#8217;s biggest drawback is that it&#8217;s only available for Mac OS, which can make it cumbersome if I&#8217;m working on one of my Linux machines and need to create or modify a figure. But it&#8217;s ease-of-use and the quality of the figures it creates are hard to beat.</p>

<p>Of course, creating the figure isn&#8217;t enough — since I write my papers in LaTeX, I have to export my figures into EPS or PDF (depending on whether I&#8217;m creating a PostScript or PDF version of the paper) before I can use them in my documents. It&#8217;s easy enough to use the Export dialog to do this (keyboard shortcut: Command-Option-E), but ideally I&#8217;d like the ability to export figures from the command line. Coupled with a good Makefile, this would let me run a simple <code>make paper</code> command, and automatically re-export any necessary figures before rebuilding the paper itself.</p>

<p>Luckily, OmniGraffle has always had rather good support for being controlled via AppleScript. The commands can be somewhat undocumented, requiring a bit of trial and error, but while entrenched in our PhD studies at Oxford, my colleague David Faitelson and I were able to whip together a script that suited our needs. I&#8217;ve recently extracted the code from our Oxford SVN repository and uploaded it to <a href='http://github.com/dcreager/graffle-export'>Github</a>.</p>

<p>To install the script, just place the <em>graffle.sh</em> and <em>graffle.scpt</em> files into some directory that&#8217;s on your <code>$PATH</code>, such as <em>/usr/local/bin</em> or <em>$HOME/bin</em>. Then just run</p>

<pre><code>$ graffle.sh «format» «graffle file» «output file»</code></pre>

<p>This will open the figure in OmniGraffle, and export it into the format you specify on the command line, saving the result into <code>«output file»</code>.</p>

<p>I&#8217;m still using version 4 of OmniGraffle, so I haven&#8217;t had a chance to verify that the script still works with version 5. If you try it, and it doesn&#8217;t, feel free to open up a ticket on the <a href='http://github.com/dcreager/graffle-export/issues'>Github site</a>.</p>
</div>

        </div>

        

        <div class="body_separator"></div>

        <div class="body">
          <div id="disqus_thread"></div>

          <script type="text/javascript">
            var disqus_title = "Exporting OmniGraffle documents from the command line";
            var disqus_url = "http://dcreager.net/2010/01/05/omnigraffle-export/";
          </script>

          <script
             type="text/javascript"
             src="http://disqus.com/forums/dcreager/embed.js">
          </script>
          <noscript>
            <a href="http://dcreager.disqus.com/?url=ref">View the discussion thread.</a>
          </noscript>

          <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>

        

      </div>
    </div>

    <div class="footer">
      <div class="copyright">
        Copyright © 2009-2010, Douglas Creager.  All rights reserved.
      </div>
    </div>

  </body>
</html>

