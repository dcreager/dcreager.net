<!doctype html>
<html lang="en">
<head>
    <title>
    dcreager.net – Home
  </title>
  <meta name="author" content="Douglas Creager">

    <meta charset="utf-8">

  <meta name="google-site-verification"
        content="7KIoYPNsfdDxIdX1QQ7SM2Nm_nyy13aRlDkzE3wzhhY" />

  <link rel="icon" type="image/x-icon" href="/media/images/imperial-logo.ico"/>
  <link rel="alternate" type="application/atom+xml"
        title="dcreager.net" href="/atom.xml"/>

  <!-- Bootstrap -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel=stylesheet type=text/css media=screen
        href="/media/vendor/css/bootstrap.min.css">
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
  <![endif]-->

  <!-- MathJax -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      jax: ["input/TeX","output/HTML-CSS"],
      displayAlign: "left",
      displayIndent: "2em"
    });
  </script>
  <script type="text/javascript" async
          src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>

  <!-- Twitter nonsense -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@dcreager">
  <meta name="twitter:title"
        content="Home">
  <meta name="twitter:description"
        content="...">
  <meta name="twitter:image"
        content="https://www.gravatar.com/avatar/04ee3ca11f1ae11c63faa7995dbf1ed7?s=2048">

  <!-- Customizations -->
  <link rel=stylesheet type=text/css media=screen
        href="/media/css/coderay.css">
  <link rel=stylesheet type=text/css media=screen
        href="/media/css/dcreager.css">
  <link rel=stylesheet type=text/css media=screen
        href="https://fonts.googleapis.com/css?family=Oxygen:400,700">

</head>

<body>
  <div class="container">
    <div class="row">
  <div class="col-md-10 col-md-offset-1">
    <nav class="navbar navbar-default" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand logo" href="/"><b>dcreager.net</b></a>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/about/">About</a></li></li>
          <li><a href="/archive/">Archive</a></li></li>
          <li><a href="https://buttondown.email/dcreager/">Newsletter</a></li></li>
          <li><a href="/talks/">Talks</a></li></li>
          <li><a href="/publications/">Publications</a></li></li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </nav>
  </div>
</div>

    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <ul class="summaries">

  
    <li class="summary">
      <div class="date">2021-01-03</div>
      <h1><a href="/git/commits-and-code-review/">Git commits and code review (revisited)</a></h1>
      <p>Drew DeVault had an interesting post yesterday (<a href="gemini://drewdevault.com/2021/01/02/2021-01-02-Every-commit-should-be-perfect.gmi">gemini</a>, <a href="https://portal.mozz.us/gemini/drewdevault.com/2021/01/02/2021-01-02-Every-commit-should-be-perfect.gmi">web</a>) about how large a git commit should be.  It echoes several points that I tried to make a couple of years back in a <a href="https://dcreager.net/git/workflows/">post of my own</a>.</p>

<p>I agree with all of the points Drew makes, and try to follow the best practices that he outlines in my own projects.  There’s an alternative mindset, though, which is very popular these days — and I’ve argued at length with my collegues at GitHub about the merits and drawbacks of each approach.  The different mindsets grow out of a point that Drew mentioned:</p>

<blockquote>
  <p>As you receive feedback on your patch and make updates, continue to rebase and improve your original commit, or commits.</p>
</blockquote>

<p>and that I called out as its own top-level rule for what makes a “clean” git history:</p>

<blockquote>
  <p>Code review does not appear in the final history of your project.</p>
</blockquote>

<p>I’ve seen this alternative mindset most often with projects that have fully bought in to using GitHub as their project hub, but it is <em>not</em> limited to GitHub!  I’ve also seen it with projects hosted on GitLab, Gitea, Phabricator, and Gerrit.  All of those code forges are centered around the Pull Request (or Merge Request or whatever else you might call it) as the mechanism for code review.  There <em>are</em> differences in workflow between these hosts — Phabricator and Gerrit, for instance, have much better support for “stacked” changes, like you’d see with a <code>[1/X]</code> thread on the Linux kernel mailing list.  But they all focus on having code review itself take place on the forge’s web site, as opposed to (for instance) on a mailing list.</p>

<p>That, in turn, makes the project maintainers and contributors internalize the idea that the forge’s unit of <em>review</em> should be the same as the project’s unit of <em>change</em> and <em>history</em>.  And that is the difference in mindset.  Zach Holman has the <a href="https://zachholman.com/posts/git-commit-history/">best summary</a> I’ve found so far.</p>

<p>If you view the PR as your unit of change, then you apply all of the same best practices, but in a different place:</p>

<ul>
  <li>The <strong><em>PR</em></strong> should introduce exactly one change, of the correct size.</li>
  <li>The <strong><em>PR title and body</em></strong> should contain a description of that change, structured and formatted in a very similar way to Tim Pope’s git commit message recommendations.</li>
  <li>The test suite must pass <strong><em>for the final state of the PR</em></strong> before it can be merged into the main branch.</li>
</ul>

<p>But as Zach calls out, you end up “not giving two shits” about the individual git commits that make up your PRs.</p>

<p>(To be clear, I am <strong><em>not</em></strong> advocating this mindset, but I was happy to find a good post <em>explaining</em> it.  It’s still like fingernails on a chalkboard to come across a project that’s organized this way.  But the “PR as unit of change” explanation at least means that I can now see that it <em>is</em> a consistent organizing principle, even if it’s not one I agree with.)</p>

<p>In my original post I suggest that if you use GitHub PRs as your unit of review, and want to use git commits as your unit of history, then you must make sure to use the “squash merge” feature when merging your PRs.  This reduces each PR-as-unit-of-review into a single commit-as-unit-of-history at merge time.  (If you’re happy to <em>mindfully</em> decide to use PRs as both your unit of review <em>and</em> your unit of history, then you can use whatever merge strategy you want.)  It’s still unsolved how best to use PRs to review a “stack” of changes, that should end up as separate commits in the history, but which should be reviewed as a unit (or as a closely reviewed sequence).</p>


      <div class="link">
        <a href="/git/commits-and-code-review/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2020-12-30</div>
      <h2 class="series"><a href="/swanson/s1/">Swanson</a></h2>
      <h1><a href="/swanson/s1/">S₁ for bootstrapping</a></h1>
      <p>In the <a href="../s0/">previous post</a>, we described S₀, and showed how it would be
<strong><em>absolutely disgusting</em></strong> to have to program in it directly.  Which is why I
described it as Swanson’s “assembly language”.  In this post, we’ll look into
exactly <em>how</em> the language is complicated, and use that to describe a <em>slightly</em>
better language named S₁.</p>


      <div class="link">
        <a href="/swanson/s1/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2020-12-29</div>
      <h1><a href="/staff-engineering-manager/">Staff engineering manager</a></h1>
      <p>I’ve been promoted!  As of January 1st, I will now be a Staff Engineering Manager at GitHub.</p>

<p>This is a new title on our career ladder, which was only added in the last couple of months.  Prior to this, the next promotion on the manager track would have been to Director.  The “Director” title, however, usually implies that you are no longer a line manager, and are instead a manager of managers.  You’re in charge of a larger group, consisting of a number of distinct teams.  As the Director of the group, you achieve impact by how your teams can work on a number of things in parallel.</p>

<p>For my own career progression, that left me with a difficult decision.  I joined GitHub specifically to work with the Semantic Code team, applying interesting program analysis ideas from research to create useful developer productivity features.  I’m still very invested in the people on this team, and the problems we’re trying to solve.  But working with a single team doesn’t line up well with the “Director” title, at least as it’s defined on our career ladder.  So going for a promotion would have realistically required moving to another part of the company, working on technology and product features that I’m less interested in.</p>

<p>We added the Staff Engineering Manager title to the career ladder specifically to address this discrepancy.  It allows me to progress in my career while still being the line manager of a single team.  I still have to show higher impact now with this new title.  And like on the IC ladder, “staff” implies that your impact needs to be cross-team in some way.</p>

<p>But so far — having not yet spent even a single day with my new title — it seems like a great fit!</p>


      <div class="link">
        <a href="/staff-engineering-manager/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2020-12-16</div>
      <h1><a href="/rust-error-handling/">Rust error handling patterns</a></h1>
      <p>This post summarizes how best to produce and consume errors in Rust code.  It’s short and to the point!  If you want more detail, check out <a href="https://nick.groenen.me/posts/rust-error-handling/">this great article</a> from Nick Groenen:</p>


      <div class="link">
        <a href="/rust-error-handling/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2020-11-15</div>
      <h2 class="series"><a href="/swanson/s0/">Swanson</a></h2>
      <h1><a href="/swanson/s0/">S₀, the “assembly language”</a></h1>
      <p>In the <a href="../execution-model/">previous post</a>, we talked about Swanson’s execution
model, but didn’t really describe what Swanson code <em>looks like</em>.  In this post,
we’ll look at S₀ (pronounced “ess naught”), which is Swanson’s “assembly
language”.</p>

<div class="aside">
  <p>As we’ll see, S₀ hews pretty closely to the Swanson execution model, and isn’t
really a language that you’ll want to program in directly.  Typically, you’ll
actually <em>write</em> in some other higher-level language, which will be translated
into S₀.  We’ll see in later posts how this process works.  For now, don’t be
put off by the amount of boilerplate that you see here — it’s not something that
you’ll have to author directly!</p>
</div>


      <div class="link">
        <a href="/swanson/s0/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2020-10-29</div>
      <h2 class="series"><a href="/swanson/execution-model/">Swanson</a></h2>
      <h1><a href="/swanson/execution-model/">Execution model</a></h1>
      <p>This post summarizes the computation model that the Swanson framework builds on.</p>


      <div class="link">
        <a href="/swanson/execution-model/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2020-10-28</div>
      <h2 class="series"><a href="/swanson/intro/">Swanson</a></h2>
      <h1><a href="/swanson/intro/">Introduction</a></h1>
      <p>My <a href="https://twitter.com/dcreager">Twitter bio</a> currently lists me as (among
other things) a “PL dilettante”.  Which of course means that I’ve been hacking
around on my own programming language for a number of years!  (Seriously, this
has been a thing for a <strong><em>long</em></strong> time.  The earliest <a href="https://github.com/swanson-lang/swanson-lang-old/commit/e8aac263d76a63c8667fca5eee079ce8af345c2d">Swanson-related
commit</a> I can find is from 2012.)  It’s gone through a number of
iterations over that time, but I’m pretty happy with where it’s at right now.
Not complete by any stretch of the imagination.  But I’ve chatted about it in
passing with several people at this point, and I figured I need to write down
the details somewhere.  My friend and colleague Rob can hold forth on these
kinds of topics in <a href="https://twitter.com/rob_rix/status/1320544724864872453">epic</a> <a href="https://twitter.com/rob_rix/status/1320488333127110659">Twitter</a> <a href="https://twitter.com/rob_rix/status/1320467572161236994">threads</a>, but I need
something more longform.  So here we are!</p>

<p>In this series of posts I’m going to describe Swanson, the programming language
framework that I’ve been noodling on.  It has two main components, one of which
is much more fleshed out than the other.</p>

<p>The first (not as fleshed out) part is an actual programming language, which
doesn’t even really have a name yet!  It brings in some interesting notions
about programmable syntax and parsing in a way that (I think) makes it easy to
construct things like DSLs.</p>

<p>The second (more important) part is an execution model that can be used as an IR
of sorts for <strong><em>all</em></strong> languages.  That makes it similar in spirit to
WebAssembly, in that the goal is to be something that you would compile (or
translate or transpile or whatever) many other languages <strong><em>into</em></strong>, and not
something to be written directly.  The Great Unnamed Language, like any other
language, would be compiled into Swanson the execution framework.</p>
      <div class="link">
        <a href="/swanson/intro/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2018-05-31</div>
      <h1><a href="/np-hard/">NP-hard isn't the end of the world</a></h1>
      <p class="big-def"><em class="tldr">tl;dr</em> We’ve typically considered it a deal-breaker to discover that
an algorithm we care about is <em>NP</em>-hard.  We’ll go to great lengths to simplify
the problem domain so that we can switch to a polynomial-time algorithm.  But if
we simplify too much, then we run the risk that our solution is no longer
useful.  Luckily, we might not have to!  <em>NP</em>-hard is a <strong><em>worst-case</em></strong> bound.
If we can convince ourselves that we won’t encounter pathological inputs, the
<em>NP</em>-hard algorithm might be just fine in practice.</p>


      <div class="link">
        <a href="/np-hard/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2018-04-19</div>
      <h1><a href="/git/workflows/">Clean git histories and code review workflows</a></h1>
      <div class="alert alert-warning">
  <p>
    <strong>NOTE</strong>: Though I'm currently employed by GitHub, I wrote this
    article before I started working there!  This post (like all of the posts on
    this site) contains my own personal views, and not those of my employer.
  </p>
</div>

<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>A couple of recent tweets really resonated me.</p>

<p><a href="https://adityamukerjee.net/">Aditya</a> started an interesting conversation:</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">If you&#39;d asked me a few weeks ago whether I preferred squash-merges or merge commits, I&#39;d have been somewhat ambivalent.<br /><br />After today, I&#39;m pretty sold on squash-merge as the better strategy. It&#39;s not without drawbacks, but on net, it&#39;s still so much better to work with.</p>&mdash; Aditya Mukerjee (@chimeracoder) <a href="https://twitter.com/chimeracoder/status/986376765567356928?ref_src=twsrc%5Etfw">April 17, 2018</a></blockquote>

<p>I’ve always really liked having a “clean” history in the git logs of my
projects.  They look nicer!  There’s a real joy to running <a href="https://git-scm.com/docs/git-log"><code>git log</code></a> (or
even better, <a href="https://git-scm.com/docs/git-log"><code>git log --graph --all</code></a>!) on a project that’s
maintained a beautiful log.  There are a number of tangible benefits, too, which
<a href="https://chris.beams.io/posts/git-commit/">others</a> <a href="https://www.git-tower.com/learn/git/ebook/en/command-line/appendix/best-practices">have</a> <a href="https://www.slideshare.net/TarinGamberini/commit-messages-goodpractices">described</a> well enough that I
don’t need to repeat them here.</p>

<p>More than that, though, for a long time I assumed that if you were using GitHub
pull requests, there was One True Way to produce a clean history, echoed by
<a href="https://sevein.com/">Jesús</a>:</p>

<blockquote class="twitter-tweet" data-conversation="none" data-lang="en"><p lang="en" dir="ltr">Best merges to me are the fast-forward merges that bring a number of meaninful, atomic, functional and self-contained commits! Not always possible...</p>&mdash; Jesús García Crespo (@sevein) <a href="https://twitter.com/sevein/status/986412919964368896?ref_src=twsrc%5Etfw">April 18, 2018</a></blockquote>

<p>But recently, just like Aditya, I’ve had a change of heart!  I realized that I
was thinking about pull requests, and what they represent in terms of the final
commit log I’m aiming for, in the wrong way.  In this post I’ll describe the
come-to-Aditya moment that made me appreciate squash-commits.  And along the way
I’ll have described two workflows that make it easy to keep a clean history: one
that doesn’t use GitHub at all (and mimics how we did git-driven development
before GitHub existed), and one that does.</p>


      <div class="link">
        <a href="/git/workflows/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2018-03-27</div>
      <h1><a href="/nel/intro/">Introducing Network Error Logging</a></h1>
      <p>Let’s say you’ve got a web site or REST service.  You have clients that send
requests to your server, which performs some interesting processing and sends
responses back.  The clients might be people using a browser, or native code in
a mobile app making requests on behalf of the user, or something more exotic.
But the overall picture is the same:</p>

<p><img src="/nel/intro/service-flow.png" alt="request service flow" class="figure" /></p>

<p>How do you monitor this service — especially when that annoying cloudy bit in
the middle is completely out of your control?</p>


      <div class="link">
        <a href="/nel/intro/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  

</ul>

      </div>
    </div> <!-- /row -->
  </div> <!-- /container -->

    <footer class="copyright">
    <div class="container">
      <p>Copyright © 2009-2020, Douglas Creager.
      All&nbsp;rights&nbsp;reserved.</p>
    </div>
  </footer>

    <script src="//code.jquery.com/jquery.min.js"></script>
  <script src="/media/vendor/js/bootstrap.min.js"></script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83885503-1', 'auto');
  ga('send', 'pageview');

</script>

</html>
