<!doctype html>
<html lang="en">
<head>
    <title>
    dcreager.net ‚Äì Home
  </title>
  <meta name="author" content="Douglas Creager">

    <meta charset="utf-8">

  <meta name="google-site-verification"
        content="7KIoYPNsfdDxIdX1QQ7SM2Nm_nyy13aRlDkzE3wzhhY" />

  <link rel="icon" type="image/x-icon" href="/media/images/imperial-logo.ico"/>
  <link rel="alternate" type="application/atom+xml"
        title="dcreager.net" href="/atom.xml"/>

  <!-- Bootstrap -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel=stylesheet type=text/css media=screen
        href="/media/vendor/css/bootstrap.min.css">
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
  <![endif]-->

  <!-- MathJax -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      jax: ["input/TeX","output/HTML-CSS"],
      displayAlign: "left",
      displayIndent: "2em"
    });
  </script>
  <script type="text/javascript" async
          src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>

  <!-- Twitter nonsense -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@dcreager">
  <meta name="twitter:title"
        content="Home">
  <meta name="twitter:description"
        content="...">
  <meta name="twitter:image"
        content="https://www.gravatar.com/avatar/04ee3ca11f1ae11c63faa7995dbf1ed7?s=2048">

  <!-- Customizations -->
  <link rel=stylesheet type=text/css media=screen
        href="/media/css/coderay.css">
  <link rel=stylesheet type=text/css media=screen
        href="/media/css/dcreager.css">
  <link rel=stylesheet type=text/css media=screen
        href="https://fonts.googleapis.com/css?family=Oxygen:400,700">

</head>

<body>
  <div class="container">
    <div class="row">
  <div class="col-md-10 col-md-offset-1">
    <nav class="navbar navbar-default" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand logo" href="/"><b>dcreager.net</b></a>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/about/">About</a></li></li>
          <li><a href="/archive/">Archive</a></li></li>
          <li><a href="https://buttondown.email/dcreager/">Newsletter</a></li></li>
          <li><a href="/talks/">Talks</a></li></li>
          <li><a href="/publications/">Publications</a></li></li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </nav>
  </div>
</div>

    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <ul class="summaries">

  
    <li class="summary">
      <div class="date">2021-06-14</div>
      <h1><a href="/tree-sitter/map/">A map of the tree-sitter ecosystem</a></h1>
      <p>The tree-sitter ecosystem is divided up across a large number of components,
each in different repositories, which can be quite overwhelming at first.  This
post tries to provide a map of sorts.</p>


      <div class="link">
        <a href="/tree-sitter/map/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2021-06-07</div>
      <h1><a href="/tree-sitter/getting-started/">Getting started with tree-sitter</a></h1>
      <p>This is the first in a series of posts on using the <a href="https://tree-sitter.github.io/">tree-sitter parsing
framework</a>.  The primary audience, at least for these first posts,
is people who want to use <strong><em>existing grammars</em></strong> to write program analysis
tools that work across a variety of programming languages.  I‚Äôm not (yet)
writing about how to create a <strong><em>new</em></strong> grammar for a new programming language.</p>

<p>We‚Äôre going to start by keeping it very simple.  In this post, we‚Äôre going to
install the <code>tree-sitter</code> command-line program and the Python grammar, and then
use those to parse and syntax highlighting some Python code.</p>


      <div class="link">
        <a href="/tree-sitter/getting-started/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2021-03-08</div>
      <h1><a href="/a-better-varint/">A better varint</a></h1>
      <p>Many binary file formats need to store integer values.  And often, those integer
values are typically ‚Äúsmall‚Äù.  That is, while the field might technically be a
32-bit integer, that field will rarely hold values from that entire 32-bit
range.  Instead, values will usually be small in magnitude, and a large number
of their higher-order bits will be 0.  In those cases, it can be useful to try
to save space by encoding the integer value in a smaller number of bytes.  Doing
so can substantially reduce the size of your file, especially when there are
lots of these small-magnitude integers to store.</p>

<p>(Note that even though the goal, and end result, is that the file is smaller,
this is not a <em>compression</em> scheme, since it only works when your values are
distributed in one particular way.  Proper compression schemes are more
sophisticated, so that they can find redundancies in many other patterns of
data.)</p>

<p>With this goal, our job is to figure out a coding scheme that lets us:</p>

<ul>
  <li>serialize an integer into a variable-length sequence of bytes</li>
  <li>deserialize a sequence of bytes back into an integer value</li>
</ul>


      <div class="link">
        <a href="/a-better-varint/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2021-01-28</div>
      <h1><a href="/sony-rx100-mkiv-webcam/">Using a Sony RX100 Mk IV as a webcam on Linux</a></h1>
      <p>Earlier this month I decided to use some of my company‚Äôs generous home office
reimbursement to test out the ‚Äúuse a real digital camera as a webcam‚Äù craze
that‚Äôs been going around.  I spend most of my day on Zoom meetings with
colleagues and other people around the industry, so I figured it wouldn‚Äôt be the
<em>worst</em> use of money ‚Äî especially if it noticeably increased the quality of the
video feed that I‚Äôm sending out into the world.</p>

<p>To raise the level of difficulty, my primary machine is a beefy Linux
workstation.  And as we all know, Linux is well-known for being straightforward
and easy to configure‚Ä¶ üôÑ</p>

<p>In the end, I decided to return the camera and stick with my battle-tested,
traditional Logitech C920 webcam.  But in case others are interested in getting
this setup working under Linux, here are my notes!</p>


      <div class="link">
        <a href="/sony-rx100-mkiv-webcam/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2021-01-03</div>
      <h1><a href="/git/commits-and-code-review/">Git commits and code review (revisited)</a></h1>
      <p>Drew DeVault had an interesting post yesterday (<a href="gemini://drewdevault.com/2021/01/02/2021-01-02-Every-commit-should-be-perfect.gmi">gemini</a>, <a href="https://portal.mozz.us/gemini/drewdevault.com/2021/01/02/2021-01-02-Every-commit-should-be-perfect.gmi">web</a>) about how large a git commit should be.  It echoes several points that I tried to make a couple of years back in a <a href="https://dcreager.net/git/workflows/">post of my own</a>.</p>

<p>I agree with all of the points Drew makes, and try to follow the best practices that he outlines in my own projects.  There‚Äôs an alternative mindset, though, which is very popular these days ‚Äî and I‚Äôve argued at length with my collegues at GitHub about the merits and drawbacks of each approach.  The different mindsets grow out of a point that Drew mentioned:</p>

<blockquote>
  <p>As you receive feedback on your patch and make updates, continue to rebase and improve your original commit, or commits.</p>
</blockquote>

<p>and that I called out as its own top-level rule for what makes a ‚Äúclean‚Äù git history:</p>

<blockquote>
  <p>Code review does not appear in the final history of your project.</p>
</blockquote>

<p>I‚Äôve seen this alternative mindset most often with projects that have fully bought in to using GitHub as their project hub, but it is <em>not</em> limited to GitHub!  I‚Äôve also seen it with projects hosted on GitLab, Gitea, Phabricator, and Gerrit.  All of those code forges are centered around the Pull Request (or Merge Request or whatever else you might call it) as the mechanism for code review.  There <em>are</em> differences in workflow between these hosts ‚Äî Phabricator and Gerrit, for instance, have much better support for ‚Äústacked‚Äù changes, like you‚Äôd see with a <code>[1/X]</code> thread on the Linux kernel mailing list.  But they all focus on having code review itself take place on the forge‚Äôs web site, as opposed to (for instance) on a mailing list.</p>

<p>That, in turn, makes the project maintainers and contributors internalize the idea that the forge‚Äôs unit of <em>review</em> should be the same as the project‚Äôs unit of <em>change</em> and <em>history</em>.  And that is the difference in mindset.  Zach Holman has the <a href="https://zachholman.com/posts/git-commit-history/">best summary</a> I‚Äôve found so far.</p>

<p>If you view the PR as your unit of change, then you apply all of the same best practices, but in a different place:</p>

<ul>
  <li>The <strong><em>PR</em></strong> should introduce exactly one change, of the correct size.</li>
  <li>The <strong><em>PR title and body</em></strong> should contain a description of that change, structured and formatted in a very similar way to Tim Pope‚Äôs git commit message recommendations.</li>
  <li>The test suite must pass <strong><em>for the final state of the PR</em></strong> before it can be merged into the main branch.</li>
</ul>

<p>But as Zach calls out, you end up ‚Äúnot giving two shits‚Äù about the individual git commits that make up your PRs.</p>

<p>(To be clear, I am <strong><em>not</em></strong> advocating this mindset, but I was happy to find a good post <em>explaining</em> it.  It‚Äôs still like fingernails on a chalkboard to come across a project that‚Äôs organized this way.  But the ‚ÄúPR as unit of change‚Äù explanation at least means that I can now see that it <em>is</em> a consistent organizing principle, even if it‚Äôs not one I agree with.)</p>

<p>In my original post I suggest that if you use GitHub PRs as your unit of review, and want to use git commits as your unit of history, then you must make sure to use the ‚Äúsquash merge‚Äù feature when merging your PRs.  This reduces each PR-as-unit-of-review into a single commit-as-unit-of-history at merge time.  (If you‚Äôre happy to <em>mindfully</em> decide to use PRs as both your unit of review <em>and</em> your unit of history, then you can use whatever merge strategy you want.)  It‚Äôs still unsolved how best to use PRs to review a ‚Äústack‚Äù of changes, that should end up as separate commits in the history, but which should be reviewed as a unit (or as a closely reviewed sequence).</p>


      <div class="link">
        <a href="/git/commits-and-code-review/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2020-12-30</div>
      <h2 class="series"><a href="/swanson/s1/">Swanson</a></h2>
      <h1><a href="/swanson/s1/">S‚ÇÅ for bootstrapping</a></h1>
      <p>In the <a href="../s0/">previous post</a>, we described S‚ÇÄ, and showed how it would be
<strong><em>absolutely disgusting</em></strong> to have to program in it directly.  Which is why I
described it as Swanson‚Äôs ‚Äúassembly language‚Äù.  In this post, we‚Äôll look into
exactly <em>how</em> the language is complicated, and use that to describe a <em>slightly</em>
better language named S‚ÇÅ.</p>


      <div class="link">
        <a href="/swanson/s1/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2020-12-29</div>
      <h1><a href="/staff-engineering-manager/">Staff engineering manager</a></h1>
      <p>I‚Äôve been promoted!  As of January 1st, I will now be a Staff Engineering Manager at GitHub.</p>

<p>This is a new title on our career ladder, which was only added in the last couple of months.  Prior to this, the next promotion on the manager track would have been to Director.  The ‚ÄúDirector‚Äù title, however, usually implies that you are no longer a line manager, and are instead a manager of managers.  You‚Äôre in charge of a larger group, consisting of a number of distinct teams.  As the Director of the group, you achieve impact by how your teams can work on a number of things in parallel.</p>

<p>For my own career progression, that left me with a difficult decision.  I joined GitHub specifically to work with the Semantic Code team, applying interesting program analysis ideas from research to create useful developer productivity features.  I‚Äôm still very invested in the people on this team, and the problems we‚Äôre trying to solve.  But working with a single team doesn‚Äôt line up well with the ‚ÄúDirector‚Äù title, at least as it‚Äôs defined on our career ladder.  So going for a promotion would have realistically required moving to another part of the company, working on technology and product features that I‚Äôm less interested in.</p>

<p>We added the Staff Engineering Manager title to the career ladder specifically to address this discrepancy.  It allows me to progress in my career while still being the line manager of a single team.  I still have to show higher impact now with this new title.  And like on the IC ladder, ‚Äústaff‚Äù implies that your impact needs to be cross-team in some way.</p>

<p>But so far ‚Äî having not yet spent even a single day with my new title ‚Äî it seems like a great fit!</p>


      <div class="link">
        <a href="/staff-engineering-manager/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2020-12-16</div>
      <h1><a href="/rust-error-handling/">Rust error handling patterns</a></h1>
      <p>This post summarizes how best to produce and consume errors in Rust code.  It‚Äôs short and to the point!  If you want more detail, check out <a href="https://nick.groenen.me/posts/rust-error-handling/">this great article</a> from Nick Groenen:</p>


      <div class="link">
        <a href="/rust-error-handling/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2020-11-15</div>
      <h2 class="series"><a href="/swanson/s0/">Swanson</a></h2>
      <h1><a href="/swanson/s0/">S‚ÇÄ, the ‚Äúassembly language‚Äù</a></h1>
      <p>In the <a href="../execution-model/">previous post</a>, we talked about Swanson‚Äôs execution
model, but didn‚Äôt really describe what Swanson code <em>looks like</em>.  In this post,
we‚Äôll look at S‚ÇÄ (pronounced ‚Äúess naught‚Äù), which is Swanson‚Äôs ‚Äúassembly
language‚Äù.</p>

<div class="aside">
  <p>As we‚Äôll see, S‚ÇÄ hews pretty closely to the Swanson execution model, and isn‚Äôt
really a language that you‚Äôll want to program in directly.  Typically, you‚Äôll
actually <em>write</em> in some other higher-level language, which will be translated
into S‚ÇÄ.  We‚Äôll see in later posts how this process works.  For now, don‚Äôt be
put off by the amount of boilerplate that you see here ‚Äî it‚Äôs not something that
you‚Äôll have to author directly!</p>
</div>


      <div class="link">
        <a href="/swanson/s0/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  
    <li class="summary">
      <div class="date">2020-10-29</div>
      <h2 class="series"><a href="/swanson/execution-model/">Swanson</a></h2>
      <h1><a href="/swanson/execution-model/">Execution model</a></h1>
      <p>This post summarizes the computation model that the Swanson framework builds on.</p>


      <div class="link">
        <a href="/swanson/execution-model/">
          Continue reading <span class="glyphicon glyphicon-share-alt"></span>
        </a>
      </div>
    </li>
  

</ul>

      </div>
    </div> <!-- /row -->
  </div> <!-- /container -->

    <footer class="copyright">
    <div class="container">
      <p>Copyright ¬© 2009-2020, Douglas Creager.
      All&nbsp;rights&nbsp;reserved.</p>
    </div>
  </footer>

    <script src="//code.jquery.com/jquery.min.js"></script>
  <script src="/media/vendor/js/bootstrap.min.js"></script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83885503-1', 'auto');
  ga('send', 'pageview');

</script>

</html>
